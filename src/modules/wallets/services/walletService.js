// import apiService from '../../shared/services/apiService'

export const walletService = {
  // L·∫•y danh s√°ch t·∫•t c·∫£ v√≠
  getWallets: async () => {
    // Mock data - thay th·∫ø b·∫±ng API call th·ª±c t·∫ø
    return {
      data: [
        {
          id: '1',
          name: 'V√≠ Ti·ªÅn M·∫∑t',
          icon: 'üíµ',
          currency: 'VND',
          balance: 2500000,
          initialAmount: 5000000,
          description: 'V√≠ ti·ªÅn m·∫∑t ch√≠nh',
          status: 'active',
          isShared: false,
          permissions: ['full', 'transfer', 'add_money', 'share'],
          createdAt: '2024-01-15T08:00:00Z',
          updatedAt: '2024-09-07T12:30:00Z'
        },
        {
          id: '2',
          name: 'T√†i Kho·∫£n Ng√¢n H√†ng',
          icon: 'üè¶',
          currency: 'VND',
          balance: 15750000,
          initialAmount: 10000000,
          description: 'T√†i kho·∫£n Vietcombank',
          status: 'active',
          isShared: true,
          permissions: ['full', 'transfer', 'add_money', 'share'],
          sharedWith: ['user2@example.com'],
          createdAt: '2024-01-20T09:15:00Z',
          updatedAt: '2024-09-07T10:45:00Z'
        },
        {
          id: '3',
          name: 'V√≠ ƒê·∫ßu T∆∞',
          icon: 'üìà',
          currency: 'USD',
          balance: 1250.50,
          initialAmount: 1000,
          description: 'V√≠ ƒë·∫ßu t∆∞ c·ªï phi·∫øu v√† crypto',
          status: 'active',
          isShared: false,
          permissions: ['full', 'transfer', 'add_money', 'share'],
          createdAt: '2024-02-01T14:20:00Z',
          updatedAt: '2024-09-06T16:20:00Z'
        },
        {
          id: '4',
          name: 'V√≠ Ti·∫øt Ki·ªám',
          icon: 'üê∑',
          currency: 'VND',
          balance: 8500000,
          initialAmount: 5000000,
          description: 'Qu·ªπ d·ª± ph√≤ng kh·∫©n c·∫•p',
          status: 'archived',
          isShared: false,
          permissions: ['full'],
          createdAt: '2024-01-10T11:00:00Z',
          updatedAt: '2024-08-15T09:30:00Z'
        },
        {
          id: '5',
          name: 'V√≠ Gia ƒê√¨nh',
          icon: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶',
          currency: 'VND',
          balance: 3200000,
          initialAmount: 2000000,
          description: 'V√≠ chung c·ªßa gia ƒë√¨nh',
          status: 'active',
          isShared: true,
          permissions: ['view'],
          sharedBy: 'husband@example.com',
          createdAt: '2024-03-05T13:45:00Z',
          updatedAt: '2024-09-05T18:10:00Z'
        }
      ]
    }
  },

  // L·∫•y th√¥ng tin chi ti·∫øt m·ªôt v√≠
  getWalletById: async (id) => {
    const wallets = await walletService.getWallets()
    const wallet = wallets.data.find(w => w.id === id)
    
    if (!wallet) {
      throw new Error('Wallet not found')
    }

    // Mock th√™m th√¥ng tin chi ti·∫øt
    return {
      data: {
        ...wallet,
        transactions: [
          {
            id: 1,
            type: 'income',
            amount: 500000,
            description: 'L∆∞∆°ng th√°ng 9',
            date: '2024-09-01T08:00:00Z',
            category: 'salary'
          },
          {
            id: 2,
            type: 'expense',
            amount: -150000,
            description: 'Mua s·∫Øm si√™u th·ªã',
            date: '2024-09-02T14:30:00Z',
            category: 'groceries'
          },
          {
            id: 3,
            type: 'transfer',
            amount: -200000,
            description: 'Chuy·ªÉn ti·ªÅn cho m·∫π',
            date: '2024-09-03T10:15:00Z',
            category: 'family',
            toWallet: 'V√≠ Gia ƒê√¨nh'
          },
          {
            id: 4,
            type: 'income',
            amount: 300000,
            description: 'B√°n ƒë·ªì c≈©',
            date: '2024-09-04T16:45:00Z',
            category: 'other'
          },
          {
            id: 5,
            type: 'expense',
            amount: -85000,
            description: 'Ti·ªÅn ƒëi·ªán th√°ng 8',
            date: '2024-09-05T09:20:00Z',
            category: 'utilities'
          }
        ],
        monthlyStats: {
          totalIncome: 800000,
          totalExpense: 435000,
          netIncome: 365000,
          transactionCount: 25
        }
      }
    }
  },

  // T·∫°o v√≠ m·ªõi
  createWallet: async (walletData) => {
    // Mock API call
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve({
          data: {
            id: Date.now(),
            ...walletData,
            balance: walletData.initialAmount || 0,
            status: 'active',
            isShared: false,
            permissions: ['full', 'transfer', 'add_money', 'share'],
            createdAt: new Date().toISOString(),
            updatedAt: new Date().toISOString()
          }
        })
      }, 1000)
    })
  },

  // C·∫≠p nh·∫≠t th√¥ng tin v√≠
  updateWallet: async (id, walletData) => {
    // Mock API call
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve({
          data: {
            id,
            ...walletData,
            updatedAt: new Date().toISOString()
          }
        })
      }, 800)
    })
  },

  // X√≥a v√≠
  deleteWallet: async (id) => {
    // Mock API call
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve({
          data: {
            success: true,
            message: 'V√≠ ƒë√£ ƒë∆∞·ª£c x√≥a th√†nh c√¥ng'
          }
        })
      }, 500)
    })
  },

  // L∆∞u tr·ªØ v√≠
  archiveWallet: async (id) => {
    // Mock API call
    return {
      data: {
        success: true,
        message: 'V√≠ ƒë√£ ƒë∆∞·ª£c l∆∞u tr·ªØ'
      }
    }
  },

  // H·ªßy l∆∞u tr·ªØ v√≠
  unarchiveWallet: async (id) => {
    // Mock API call
    return {
      data: {
        success: true,
        message: 'V√≠ ƒë√£ ƒë∆∞·ª£c kh√¥i ph·ª•c'
      }
    }
  },

  // Chuy·ªÉn ti·ªÅn gi·ªØa c√°c v√≠
  transferMoney: async (transferData) => {
    // Mock API call
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve({
          data: {
            success: true,
            transactionId: 'TXN' + Date.now(),
            message: 'Chuy·ªÉn ti·ªÅn th√†nh c√¥ng'
          }
        })
      }, 1500)
    })
  },

  // N·∫°p ti·ªÅn v√†o v√≠
  addMoney: async (transactionData) => {
    // Mock API call
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve({
          data: {
            success: true,
            transactionId: 'ADD' + Date.now(),
            message: 'N·∫°p ti·ªÅn th√†nh c√¥ng'
          }
        })
      }, 1500)
    })
  },

  // Chia s·∫ª v√≠
  shareWallet: async (shareData) => {
    // Mock API call
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve({
          data: {
            success: true,
            shareId: 'SHARE' + Date.now(),
            shareLink: `${window.location.origin}/shared-wallet/SHARE${Date.now()}`,
            message: 'Chia s·∫ª v√≠ th√†nh c√¥ng'
          }
        })
      }, 1000)
    })
  },

  // L·∫•y danh s√°ch v√≠ ƒë√£ chia s·∫ª
  getSharedWallets: async () => {
    // Mock data
    return {
      data: [
        {
          id: 'SHARE1',
          wallet: {
            id: '1',
            name: 'V√≠ Ti·ªÅn M·∫∑t',
            icon: 'üíµ',
            balance: 2500000,
            currency: 'VND'
          },
          shareType: 'view',
          recipients: ['user1@example.com', 'user2@example.com'],
          createdAt: '2024-09-01T10:00:00Z',
          expiryDate: '2024-12-01T10:00:00Z',
          shareLink: 'https://app.com/shared-wallet/SHARE1'
        },
        {
          id: 'SHARE2',
          wallet: {
            id: '2',
            name: 'T√†i Kho·∫£n Ng√¢n H√†ng',
            icon: 'üè¶',
            balance: 15750000,
            currency: 'VND'
          },
          shareType: 'edit',
          recipients: ['family@example.com'],
          createdAt: '2024-08-15T14:30:00Z',
          expiryDate: null,
          shareLink: 'https://app.com/shared-wallet/SHARE2'
        }
      ]
    }
  },

  // Thu h·ªìi quy·ªÅn truy c·∫≠p v√≠
  revokeWalletAccess: async (shareId) => {
    // Mock API call
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve({
          data: {
            success: true,
            message: 'ƒê√£ thu h·ªìi quy·ªÅn truy c·∫≠p'
          }
        })
      }, 500)
    })
  },

  // L·∫•y l·ªãch s·ª≠ giao d·ªãch
  getTransactions: async (filters = {}) => {
    // Mock data cho l·ªãch s·ª≠ giao d·ªãch
    return {
      data: [
        {
          id: 'TXN1',
          wallet: { id: '1', name: 'V√≠ Ti·ªÅn M·∫∑t' },
          type: 'deposit',
          amount: 500000,
          method: 'bank',
          category: 'income',
          note: 'L∆∞∆°ng th√°ng 9',
          createdAt: '2024-09-06T10:30:00Z'
        },
        {
          id: 'TXN2',
          wallet: { id: '2', name: 'T√†i Kho·∫£n Ng√¢n H√†ng' },
          type: 'deposit',
          amount: 1000000,
          method: 'transfer',
          category: 'bonus',
          note: 'Th∆∞·ªüng d·ª± √°n',
          createdAt: '2024-09-05T15:45:00Z'
        },
        {
          id: 'TXN3',
          wallet: { id: '1', name: 'V√≠ Ti·ªÅn M·∫∑t' },
          type: 'deposit',
          amount: 200000,
          method: 'cash',
          category: 'gift',
          note: 'Ti·ªÅn m·ª´ng sinh nh·∫≠t',
          createdAt: '2024-09-04T12:20:00Z'
        },
        {
          id: 'TXN4',
          wallet: { id: '3', name: 'V√≠ ƒê·∫ßu T∆∞' },
          type: 'deposit',
          amount: 2000000,
          method: 'bank',
          category: 'income',
          note: 'Chuy·ªÉn t·ª´ ti·∫øt ki·ªám',
          createdAt: '2024-09-03T09:15:00Z'
        },
        {
          id: 'TXN5',
          wallet: { id: '2', name: 'T√†i Kho·∫£n Ng√¢n H√†ng' },
          type: 'deposit',
          amount: 750000,
          method: 'card',
          category: 'refund',
          note: 'Ho√†n ti·ªÅn mua s·∫Øm',
          createdAt: '2024-09-02T16:30:00Z'
        }
      ].filter(transaction => {
        if (filters.type && transaction.type !== filters.type) return false
        if (filters.walletId && transaction.wallet.id !== filters.walletId) return false
        return true
      }).slice(0, filters.limit || 10)
    }
  },

  // Legacy methods for backward compatibility
  removeWalletAccess: async (walletId, email) => {
    return {
      data: {
        success: true,
        message: `ƒê√£ x√≥a quy·ªÅn truy c·∫≠p v√≠ c·ªßa ${email}`
      }
    }
  },

  getWalletSharedUsers: async (walletId) => {
    return {
      data: {
        success: true,
        data: [
          {
            id: 1,
            email: 'user2@example.com',
            permission: 'viewer',
            sharedAt: '2024-08-15T10:30:00Z'
          },
          {
            id: 2,
            email: 'user3@example.com',
            permission: 'owner',
            sharedAt: '2024-08-20T14:15:00Z'
          }
        ]
      }
    }
  }
}
